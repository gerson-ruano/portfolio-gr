---
import Header from "@/components/Header.astro";
import SEOTags from "@/components/seo/SEOTags.astro";
//import { fade } from "astro:transitions";
import "@fontsource/open-sans";
import "@/styles/tailwind.css";
import "@/styles/blog.css";
import Footer from "@/components/Footer.astro";

export interface Props {
  title: string;
}

const { title } = Astro.props;
---

<!doctype html>
<html lang="en">
  <head>
    <SEOTags title={title} />
    
    <!-- Script para manejo inmediato del tema -->
    <script>
      // Aplicar tema inmediatamente para evitar flash
      (function() {
        const savedTheme = localStorage.getItem('theme');
        const systemDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        const theme = savedTheme || (systemDark ? 'dark' : 'light');
        
        document.documentElement.classList.toggle('dark', theme === 'dark');
        document.documentElement.classList.toggle('light', theme === 'light');
      })();
    </script>
  </head>

  <body
    class="mx-auto flex flex-col min-h-screen max-w-[1050px] bg-transparent px-10 py-8 gap-8 text-sm text-neutral-900 dark:text-neutral-200 md:gap-14 md:py-16"
  >
    <Header />
    <!-- Content Slot -->
    <main transition:animate="fade">
      <slot />
    </main>
    <Footer />
    <!-- Script principal del tema -->
    <script>
  // Sistema mejorado con data attributes
  function initThemeSystem() {
    // Obtener tema actual
    const savedTheme = localStorage.getItem('theme');
    const systemDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    const currentTheme = savedTheme || (systemDark ? 'dark' : 'light');
    
    // Aplicar tema
    document.documentElement.setAttribute('data-theme', currentTheme);
    document.documentElement.classList.toggle('dark', currentTheme === 'dark');
    document.documentElement.classList.toggle('light', currentTheme === 'light');
    
    // Configurar toggle
    const themeToggle = document.getElementById('themeToggle');
    if (themeToggle) {
      themeToggle.onclick = () => {
        const current = document.documentElement.getAttribute('data-theme') || currentTheme;
        const newTheme = current === 'dark' ? 'light' : 'dark';
        
        localStorage.setItem('theme', newTheme);
        document.documentElement.setAttribute('data-theme', newTheme);
        document.documentElement.classList.toggle('dark', newTheme === 'dark');
        document.documentElement.classList.toggle('light', newTheme === 'light');
      };
    }
  }

  // Inicializar
  initThemeSystem();
  document.addEventListener('astro:page-load', initThemeSystem);
  document.addEventListener('astro:after-swap', initThemeSystem);
</script>
    <style is:global>
      html {
        font-family: "Open Sans";
      }
    </style>

    <!-- Remove the following div to remove the demo banner -->
  </body>
</html>
